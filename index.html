<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Juego Scrum - Arma tu Delantera</title>
  <style>
    :root {
      --ok: #22c55e;
      --bad: #ef4444;
      --card-bg: #fefefe;
      --panel-bg: #fff;
      --ink-1: #222;
      --ink-2: #555;
      --accent: #0070f3;
    }
    * { box-sizing: border-box; }
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f9;
      padding: 20px;
      display: flex;
      justify-content: center;
    }
    .container {
      width: 100%;
      max-width: 1100px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 32px;
      align-items: start;
    }
    h1 { grid-column: 1 / -1; text-align: center; margin: 0 0 10px; color: #333; }

    .column {
      background: var(--panel-bg);
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.12);
      min-height: 520px;
      display: flex;
      flex-direction: column;
      border: 3px solid transparent; /* se pintarÃ¡ en verde/rojo segÃºn regla */
      transition: border-color .15s ease, background .15s ease;
    }
    .column h2 { text-align: center; margin: 0 0 12px; }

    .hint { text-align:center; font-size:12px; color:#777; margin-bottom:8px; }

    .board { display: flex; flex-direction: column; gap: 10px; }

    .card {
      background: var(--card-bg);
      border-radius: 10px;
      padding: 10px 12px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.10);
      cursor: grab;
      display: grid;
      grid-template-columns: 1fr auto auto;
      align-items: center;
      gap: 8px;
      border: 1px solid #e5e7eb;
    }
    .card h3 { margin: 0; font-size: 16px; color: var(--ink-1); }
    .card p { margin: 0; font-size: 13px; color: var(--ink-2); }
    .cost { font-weight: bold; color: var(--accent); }

    .remove {
      display: inline-flex; align-items:center; justify-content:center;
      width: 22px; height: 22px; line-height: 22px; border-radius: 6px;
      font-weight: 700; cursor: pointer; user-select: none; border:1px solid #fca5a5;
      color: var(--bad); background: #fff5f5;
    }
    .remove:hover { background: #ffe4e6; }

    .dropping { outline: 3px dashed #94a3b8; outline-offset: -6px; }
    .valid { border-color: var(--ok); }
    .invalid { border-color: var(--bad); }

    .footer {
      grid-column: 1 / -1; display:flex; gap:16px; justify-content:center; margin-top:12px;
      font-size: 14px; color:#333;
    }
    .badge { padding:6px 10px; background:#e5e7eb; border-radius: 999px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>âš½ Juego Scrum â€“ ArmÃ¡ tu delantera (3) con presupuesto 15</h1>

    <!-- Columna izquierda: Backlog -->
    <div class="column" id="left-column">
      <h2>ðŸ“‹ Lista de Jugadores</h2>
      <div class="hint">ArrastrÃ¡ hacia la derecha para ficharlos</div>
      <div class="board" id="players">
        <div class="card" draggable="true" data-id="messi" data-cost="9"><h3>Lionel Messi</h3><p>ðŸ‡¦ðŸ‡· Argentina</p><p>Costo: <span class="cost">9</span></p></div>
        <div class="card" draggable="true" data-id="cr7" data-cost="9"><h3>Cristiano Ronaldo</h3><p>ðŸ‡µðŸ‡¹ Portugal</p><p>Costo: <span class="cost">9</span></p></div>
        <div class="card" draggable="true" data-id="ronaldo" data-cost="8"><h3>Ronaldo NazÃ¡rio</h3><p>ðŸ‡§ðŸ‡· Brasil</p><p>Costo: <span class="cost">8</span></p></div>
        <div class="card" draggable="true" data-id="henry" data-cost="7"><h3>Thierry Henry</h3><p>ðŸ‡«ðŸ‡· Francia</p><p>Costo: <span class="cost">7</span></p></div>
        <div class="card" draggable="true" data-id="zlatan" data-cost="6"><h3>Zlatan IbrahimoviÄ‡</h3><p>ðŸ‡¸ðŸ‡ª Suecia</p><p>Costo: <span class="cost">6</span></p></div>
        <div class="card" draggable="true" data-id="drogba" data-cost="6"><h3>Didier Drogba</h3><p>ðŸ‡¨ðŸ‡® Costa de Marfil</p><p>Costo: <span class="cost">6</span></p></div>
        <div class="card" draggable="true" data-id="bati" data-cost="5"><h3>Gabriel Batistuta</h3><p>ðŸ‡¦ðŸ‡· Argentina</p><p>Costo: <span class="cost">5</span></p></div>
        <div class="card" draggable="true" data-id="hugo" data-cost="4"><h3>Hugo SÃ¡nchez</h3><p>ðŸ‡²ðŸ‡½ MÃ©xico</p><p>Costo: <span class="cost">4</span></p></div>
        <div class="card" draggable="true" data-id="weah" data-cost="4"><h3>George Weah</h3><p>ðŸ‡±ðŸ‡· Liberia</p><p>Costo: <span class="cost">4</span></p></div>
        <div class="card" draggable="true" data-id="rossi" data-cost="3"><h3>Paolo Rossi</h3><p>ðŸ‡®ðŸ‡¹ Italia</p><p>Costo: <span class="cost">3</span></p></div>
      </div>
    </div>

    <!-- Columna derecha: Mi Delantera -->
    <div class="column" id="right-column">
      <h2>ðŸš€ Mi Delantera</h2>
      <div class="hint">SoltÃ¡ aquÃ­ tus 3 fichajes</div>
      <div class="board" id="my-team"></div>
    </div>

    <div class="footer">
      <span class="badge" id="count-badge">Seleccionados: 0 / 3</span>
      <span class="badge" id="budget-badge">Puntos usados: 0 / 15</span>
    </div>
  </div>

  <script>
    const leftColumn = document.getElementById('left-column');
    const rightColumn = document.getElementById('right-column');
    const playersBoard = document.getElementById('players');
    const myTeam = document.getElementById('my-team');

    const maxPlayers = 3;
    const budget = 15;

    const countBadge = document.getElementById('count-badge');
    const budgetBadge = document.getElementById('budget-badge');

    // DelegaciÃ³n de eventos para drag de cartas en la columna izquierda
    playersBoard.addEventListener('dragstart', (e) => {
      const card = e.target.closest('.card');
      if (!card) return;
      e.dataTransfer.setData('text/plain', card.dataset.id);
      rightColumn.classList.add('dropping');
    });

    document.addEventListener('dragend', () => {
      rightColumn.classList.remove('dropping');
    });

    // Habilitar drop sobre la columna derecha
    rightColumn.addEventListener('dragover', (e) => {
      e.preventDefault();
    });

    rightColumn.addEventListener('drop', (e) => {
      e.preventDefault();
      const id = e.dataTransfer.getData('text/plain');
      if (!id) return;

      // Reglas: mÃ¡ximo 3 y sin duplicados
      if (myTeam.children.length >= maxPlayers) return;
      if (Array.from(myTeam.children).some(c => c.dataset.id === id)) return;

      // MOVER la carta (no copiar) desde la izquierda a la derecha
      const original = playersBoard.querySelector(`.card[data-id="${id}"]`);
      if (!original) return; // ya no estÃ¡ disponible

      // Quitar de izquierda
      playersBoard.removeChild(original);

      // Preparar para la derecha
      original.setAttribute('draggable', 'false');

      // BotÃ³n de quitar
      let removeBtn = document.createElement('span');
      removeBtn.textContent = 'âœ–';
      removeBtn.title = 'Quitar de mi delantera';
      removeBtn.className = 'remove';
      removeBtn.addEventListener('click', () => {
        // devolver a la izquierda (y hacerlo draggable de nuevo)
        original.removeChild(removeBtn);
        original.setAttribute('draggable', 'true');
        playersBoard.appendChild(original);
        evaluateBudget();
      });

      original.appendChild(removeBtn);
      myTeam.appendChild(original);
      evaluateBudget();
    });

    function evaluateBudget() {
      const cards = Array.from(myTeam.children);
      const total = cards.reduce((acc, c) => acc + parseInt(c.dataset.cost, 10), 0);

      // Badges informativos
      countBadge.textContent = `Seleccionados: ${cards.length} / ${maxPlayers}`;
      budgetBadge.textContent = `Puntos usados: ${total} / ${budget}`;

      // SÃ³lo evalÃºa color cuando hay exactamente 3
      rightColumn.classList.remove('valid', 'invalid');
      if (cards.length === maxPlayers) {
        if (total <= budget) {
          rightColumn.classList.add('valid');
        } else {
          rightColumn.classList.add('invalid');
        }
      }
    }
  </script>
</body>
</html>

