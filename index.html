<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Juego Scrum - Delantera (DiseÃ±o Mejorado + FACE_POS)</title>
  <style>
    :root {
      --ok:#22c55e; --bad:#ef4444; --neutral:#94a3b8;
      --panel:#ffffff; --bg:#f5f7fb; --ink:#111827; --muted:#6b7280; --accent:#2563eb;
    }
    *{box-sizing:border-box}
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); margin:0; padding:24px; color:var(--ink); }
    h1{margin:0 0 8px 0; font-size:22px}
    .sub{color:var(--muted); margin-bottom:16px}

    .grid{display:grid; grid-template-columns:1fr 1fr; gap:24px; align-items:start}
    @media (max-width: 880px){ .grid{ grid-template-columns:1fr } }

    .column { background:var(--panel); border:2px dashed var(--neutral); border-radius:16px; padding:14px; min-height:420px; transition:border-color .2s, box-shadow .2s }
    .column h2 { text-align:center; margin:6px 0 8px }
    .hint{ text-align:center; color:var(--muted); font-size:13px; margin-bottom:8px }
    .column.ok{ border-color:var(--ok) }
    .column.bad{ border-color:var(--bad) }
    .dropping{ outline:3px dashed #93c5fd; outline-offset:-6px }

    .list{ display:grid; gap:10px; min-height:320px }

    .player{ background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:10px; display:flex; align-items:center; justify-content:space-between; cursor:grab }
    .player:active{ cursor:grabbing }
    .left-part{ display:flex; align-items:center; gap:12px; }
    .photo{
      width:56px; height:56px; border-radius:10px;
      object-fit:cover; object-position:50% 50%; /* centro por defecto */
      border:1px solid #e5e7eb
    }
    .info h3{ margin:0; font-size:15px }
    .right-part{ text-align:right; display:flex; flex-direction:column; align-items:flex-end; gap:4px; }
    .cost{ font-weight:700; color:var(--accent); }
    .goals{ font-size:12px; color:var(--muted); display:flex; align-items:center; gap:6px }
    .remove{ margin-top:4px; display:inline-grid; place-items:center; width:22px; height:22px; border-radius:6px; background:#fee2e2; color:#991b1b; border:1px solid #fecaca; cursor:pointer; font-weight:700 }

    .footer{ display:flex; gap:10px; justify-content:center; margin-top:8px; color:#374151; font-size:14px }
    .badge{ background:#f3f4f6; border:1px solid #e5e7eb; padding:6px 10px; border-radius:999px }
  </style>
</head>
<body>
  <h1>âš½ Juego Scrum â€“ ArmÃ¡ tu delantera</h1>
  <div class="sub">ArrastrÃ¡ 3 tarjetas a <b>Mi delantera</b>. Presupuesto: <b id="budgetTop">15</b> puntos. Se evalÃºa el presupuesto desde la 2Âª tarjeta.</div>

  <div class="grid">
    <section>
      <div class="column" id="leftCol" data-col="left">
        <h2>ðŸ“‹ Lista de Jugadores</h2>
        <div class="hint">ArrastrÃ¡ hacia la derecha para ficharlos</div>
        <div class="list" id="leftList"></div>
      </div>
    </section>

    <section>
      <div class="column" id="rightCol" data-col="right">
        <h2>ðŸš€ Mi delantera</h2>
        <div class="hint">MÃ¡ximo 3. Si superÃ¡s el presupuesto se marca en rojo.</div>
        <div class="list" id="rightList"></div>
        <div class="footer">
          <span class="badge">Seleccionados: <b id="countSel">0</b>/3</span>
          <span class="badge">Puntos usados: <b id="pointsUsed">0</b>/<b id="budgetFoot">15</b></span>
        </div>
      </div>
    </section>
  </div>

  <script>
    const BUDGET = 15;
    document.getElementById('budgetTop').textContent = BUDGET;
    document.getElementById('budgetFoot').textContent = BUDGET;

    /* Tus links tal cual los pasaste */
    const PLAYERS = [
      { id:'messi',    nombre:'Lionel Messi',          pais:'Argentina', costo:10, goles:110, foto:'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b4/Lionel-Messi-Argentina-2022-FIFA-World-Cup_%28cropped%29.jpg/640px-Lionel-Messi-Argentina-2022-FIFA-World-Cup_%28cropped%29.jpg' },
      { id:'cr7',      nombre:'Cristiano Ronaldo',     pais:'Portugal',  costo:9,  goles:130, foto:'https://upload.wikimedia.org/wikipedia/commons/8/8c/Cristiano_Ronaldo_2018.jpg' },
      { id:'ronaldo',  nombre:'Ronaldo NazÃ¡rio',       pais:'Brasil',    costo:8,  goles:62,  foto:'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTxlRKlWiG2gN3GGSAEOE5s41Pfemr-Q-C75g&s' },
      { id:'henry',    nombre:'Thierry Henry',         pais:'Francia',   costo:7,  goles:51,  foto:'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ8a7hkFWX_0QSNViXLu1IVuvYTvh9CKIrL0w&s' },
      { id:'vanbasten',nombre:'Marco van Basten',      pais:'PaÃ­ses Bajos', costo:6, goles:24, foto:'https://assets.goal.com/images/v3/blt01f682a907f9ed27/crop/MM5DCOBYHE5DCMBWGM5G433XMU5DEMBVHIYA====/b4361e12d27e01a3bd3bcc429c5dc2aa91bb6a77.jpg?auto=webp&format=pjpg&width=3840&quality=60' },
      { id:'drogba',   nombre:'Didier Drogba',         pais:'Costa de Marfil', costo:5, goles:65, foto:'https://upload.wikimedia.org/wikipedia/commons/thumb/0/0b/Didier_Drogba.JPG/250px-Didier_Drogba.JPG' },
      { id:'eto',      nombre:'Samuel Etoâ€™o',          pais:'CamerÃºn',   costo:4,  goles:56,  foto:'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Samuel_Eto%27o.jpg/640px-Samuel_Eto%27o.jpg' },
      { id:'chicha',   nombre:'Javier "Chicharito" HernÃ¡ndez', pais:'MÃ©xico', costo:3, goles:52, foto:'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQV5uvms_anbvyOWiQAGVv4gRfDnt5a0vPHDpYJ1zoVbuPbwIFRBB49NCDbxa7rc2GI-C8&usqp=CAU' },
      { id:'totti',    nombre:'Francesco Totti',       pais:'Italia',    costo:2,  goles:9,   foto:'https://grupovierci.brightspotcdn.com/dims4/default/e6f7cdd/2147483647/strip/false/crop/600x450+0+0/resize/600x450!/quality/90/?url=https%3A%2F%2Fk2-prod-grupo-vierci.s3.us-east-1.amazonaws.com%2Fbrightspot%2Fadjuntos%2F169%2Fimagenes%2F007%2F389%2F0007389861.jpg' },
      { id:'alexis',   nombre:'Alexis SÃ¡nchez',        pais:'Chile',     costo:4,  goles:51,  foto:'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTFCByW9kfdb41E9ywLnybVzTYriSr4lPictZTESk5_9IWupeeKcZ9upYRD8TAojFz0vk0&usqp=CAU' },
    ];

    /* Mapa de foco por jugador. ModificÃ¡ los porcentajes para ajustar encuadre.
       Formato: 'X% Y%'. Y% menor = sube encuadre (Ãºtil si la cara queda alta). */
    const FACE_POS = {
      messi:     '50% 35%',
      cr7:       '50% 35%',
      ronaldo:   '50% 35%',
      henry:     '50% 35%',
      vanbasten: '50% 45%',
      drogba:    '50% 45%',
      eto:       '50% 10%',
      chicha:    '50% 40%',
      totti:     '50% 45%',
      alexis:    '50% 42%',
    };

    const leftCol = document.getElementById('leftCol');
    const rightCol = document.getElementById('rightCol');
    const leftList = document.getElementById('leftList');
    const rightList = document.getElementById('rightList');
    const pointsUsedEl = document.getElementById('pointsUsed');
    const countSelEl = document.getElementById('countSel');

    let selected = [];

    function availablePlayers(){
      return PLAYERS.filter(p => !selected.includes(p.id)).sort((a,b) => b.costo - a.costo);
    }

    function render(){
      leftList.innerHTML = '';
      for(const p of availablePlayers()) leftList.appendChild(card(p, false));
      rightList.innerHTML = '';
      for(const id of selected){ const p = PLAYERS.find(x=>x.id===id); rightList.appendChild(card(p, true)); }
      updateStatus();
    }

    function card(p, withRemove){
      const el = document.createElement('div');
      el.className = 'player';
      el.draggable = true;
      el.dataset.id = p.id;
      el.dataset.costo = p.costo;

      const leftPart = document.createElement('div');
      leftPart.className = 'left-part';

      const img = document.createElement('img');
      img.className = 'photo';
      img.src = p.foto;
      img.alt = `${p.nombre}`;
      img.addEventListener('load', () => {
        img.style.objectPosition = FACE_POS[p.id] || '50% 50%';
      });
      img.addEventListener('error', () => {
        // Fallback simple si la imagen no carga (p.ej. enlaces con error)
        img.style.background = '#eee';
        img.src = 'data:image/svg+xml;utf8,' + encodeURIComponent(
          `<svg xmlns="http://www.w3.org/2000/svg" width="56" height="56"><rect width="56" height="56" fill="#e5e7eb"/><text x="50%" y="54%" font-size="14" text-anchor="middle" fill="#6b7280">IMG</text></svg>`
        );
      });
      leftPart.appendChild(img);

      const info = document.createElement('div');
      info.className = 'info';
      const h3 = document.createElement('h3'); h3.textContent = `${p.nombre} (${p.pais})`;
      info.appendChild(h3);
      leftPart.appendChild(info);

      const rightPart = document.createElement('div');
      rightPart.className = 'right-part';
      const goals = document.createElement('div'); goals.className = 'goals'; goals.innerHTML = `<span class="icon" aria-hidden="true">âš½</span> Goles: <b>${p.goles}</b>`;
      const cost = document.createElement('div'); cost.className = 'cost'; cost.textContent = `Costo: ${p.costo}`;
      rightPart.appendChild(goals);
      rightPart.appendChild(cost);

      el.appendChild(leftPart);
      el.appendChild(rightPart);

      if(withRemove){
        const btn = document.createElement('button');
        btn.className = 'remove'; btn.title = 'Quitar'; btn.textContent = 'Ã—';
        btn.addEventListener('click', ()=> moveToLeft(p.id));
        rightPart.appendChild(btn);
      }

      el.addEventListener('dragstart', e=>{
        e.dataTransfer.setData('text/plain', p.id);
        e.dataTransfer.effectAllowed = 'move';
      });

      return el;
    }

    function allowDropZone(colEl){
      colEl.addEventListener('dragover', e=>{ e.preventDefault(); colEl.classList.add('dropping'); e.dataTransfer.dropEffect='move'; });
      colEl.addEventListener('dragleave', ()=> colEl.classList.remove('dropping'));
      colEl.addEventListener('drop', e=>{
        e.preventDefault(); colEl.classList.remove('dropping');
        const id = e.dataTransfer.getData('text/plain');
        if(!id) return;
        if(colEl.dataset.col==='right') moveToRight(id); else moveToLeft(id);
      });
    }

    allowDropZone(leftCol);
    allowDropZone(rightCol);

    function moveToRight(id){
      if(selected.includes(id) || selected.length>=3) return;
      selected.push(id);
      render();
      if(selected.length>=2) evaluateBudget();
    }

    function moveToLeft(id){
      const idx = selected.indexOf(id);
      if(idx!==-1){ selected.splice(idx,1); render(); }
    }

    function totalPoints(){ return selected.map(id => PLAYERS.find(p=>p.id===id)?.costo||0).reduce((a,b)=>a+b,0); }

    function updateStatus(){
      const total = totalPoints();
      pointsUsedEl.textContent = total;
      countSelEl.textContent = selected.length;
      evaluateBudget();
    }

    function evaluateBudget(){
      rightCol.classList.remove('ok','bad');
      if(selected.length>=2){
        if(totalPoints() <= BUDGET) rightCol.classList.add('ok');
        else rightCol.classList.add('bad');
      }
    }

    render();
  </script>
</body>
</html>


